<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* 你的原本 login style 可以沿用 */
*{box-sizing:border-box;font-family:"Segoe UI","Noto Sans TC",Arial,sans-serif;}
body{margin:0;height:100vh;background:linear-gradient(135deg,#f5f7fa,#e8edf3);display:flex;align-items:center;justify-content:center;color:#1f2937;}
.login-card{width:380px;background:#fff;padding:36px 40px;border-radius:14px;box-shadow:0 20px 40px rgba(0,0,0,0.08);}
.logo{text-align:center;margin-bottom:28px;}
.logo h1{margin:0;font-size:22px;color:#0f2a44;font-weight:600;}
.logo span{font-size:13px;color:#6b7280;}
.form-group{margin-bottom:18px;}
label{display:block;font-size:13px;margin-bottom:6px;color:#374151;}
input{width:100%;padding:12px 14px;border-radius:8px;border:1px solid #d1d5db;font-size:14px;}
input:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px rgba(37,99,235,0.15);}
button{width:100%;padding:12px;border:none;border-radius:8px;background:#0f2a44;color:#fff;font-size:15px;font-weight:500;cursor:pointer;margin-top:6px;}
button:hover{background:#143a5c;}
.error{display:none;margin-top:14px;font-size:13px;color:#b91c1c;text-align:center;}
.footer{margin-top:26px;font-size:12px;text-align:center;color:#6b7280;}
</style>
</head>
<body>
<div class="login-card">
  <div class="logo">
    <h1>Structured Products Analytics</h1>
    <span>Internal Access</span>
  </div>
  <div class="form-group">
    <label>帳號</label>
    <input type="text" id="username" placeholder="Username">
  </div>
  <div class="form-group">
    <label>密碼</label>
    <input type="password" id="password" placeholder="Password">
  </div>
  <button onclick="login()">登入</button>
  <button onclick="location.href='register.html'">註冊</button>
  <div class="error" id="errorMsg">帳號或密碼錯誤</div>
  <div class="footer">© 2026 Fixed Coupon Note (FCN)</div>
</div>
<script>
const API_BASE = "https://structuredproductanalysis.onrender.com";
async function login(){
  const username=document.getElementById("username").value.trim();
  const password=document.getElementById("password").value;
  const errorMsg=document.getElementById("errorMsg");
  try{
    const res=await fetch(API_BASE+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username,password})});
    const data=await res.json();
    if(res.ok){
      if(data.role==="admin"){
        location.href="admin.html";
      }else{
        alert("登入成功");
      }
    }else{
      errorMsg.style.display="block";
      errorMsg.textContent=data.message;
    }
  }catch(e){
    console.log(e);
  }
}
</script>
</body>
</html>
